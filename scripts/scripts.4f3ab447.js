"use strict";function filterConvert(a,b){if(b){for(var c in a)a[c].filter&&b&&b[c]&&(a[c].filter.term=b[c]),a[c].filters&&b&&b[c]&&(a[c].filters[0].term=b[c]);return a}var b={};for(var c in a)a[c].filter&&a[c].filter.term&&(b[c]=a[c].filter.term),a[c].filters&&a[c].filters[0].term&&(b[c]=a[c].filters[0].term);return b}angular.module("superstockApp",["ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","firebase","ui.grid","agGrid","ui.grid.pinning","firebase.auth","firebase.ref","ui.slider","btorfs.multiselect","uiSwitch"]),$(document).on("click",".ag-row",function(){var a=$(this),b=a.prop("class").indexOf("click-row");$(".ag-row").removeClass("click-row"),b>-1?a.removeClass("click-row"):a.addClass("click-row")}),angular.module("superstockApp").factory("draw",["$firebaseArray",function(a){var b=function(b,c,d,e,f){var g=a(b),h=[],i=!0;g.$watch(function(a){if(0!=i&&0!=g.length){var b=g[g.length-1],e={};c.idLabel&&(e[c.idLabel]=b.$id);var f=b.$value.split("|");for(var j in c.labelList)c.labelList[j].format.indexOf("percent")>-1?e[c.labelList[j].fieldName]=Math.ceil(1e4*f[j])/100:c.labelList[j].format.indexOf("bigNum")>-1||c.labelList[j].format.indexOf("number")>-1?e[c.labelList[j].fieldName]=parseFloat(f[j]):e[c.labelList[j].fieldName]=f[j];d(e),h.push(e)}}),g.$loaded(function(){i=!1,e(h),b.on("child_added",function(a,b){var d={};c.idLabel&&(d[c.idLabel]=a.key);var e=a.val().split("|");for(var g in c.labelList)c.labelList[g].format.indexOf("percent")>-1?d[c.labelList[g].fieldName]=Math.ceil(1e4*e[g])/100:c.labelList[g].format.indexOf("bigNum")>-1||c.labelList[g].format.indexOf("number")>-1?d[c.labelList[g].fieldName]=parseFloat(e[g]):d[c.labelList[g].fieldName]=e[g];f.added(d,a,b)}),b.on("child_changed",function(a,b){var d={};c.idLabel&&(d[c.idLabel]=a.key);var e=a.val().split("|");for(var g in c.labelList)c.labelList[g].format.indexOf("percent")>-1?d[c.labelList[g].fieldName]=Math.ceil(1e4*e[g])/100:c.labelList[g].format.indexOf("bigNum")>-1||c.labelList[g].format.indexOf("number")>-1?d[c.labelList[g].fieldName]=parseFloat(e[g]):d[c.labelList[g].fieldName]=e[g];f.changed(d,a,b)}),b.on("child_removed",function(a){f.removed(a)})})};return{drawGrid:b}}]),angular.module("superstockApp").factory("utils",function(){return{getCellClass:function(a,b){var c=a.colDef.field,d=a.value,e=[];switch((b[c].indexOf("number")>-1||b[c].indexOf("percent")>-1||b[c].indexOf("bigNum")>-1)&&e.push("ui-cell-align-right"),a.value&&b[c].indexOf("percent")>-1&&e.push("percent"),c){case"priceChange":0>d?e.push("grid-cell-red"):e.push("grid-cell-green");break;case"EPS":1e3>d?e.push("grid-cell-red"):e.push("grid-cell-green");break;case"revenueChange":case"EPSChange":case"profitChange":0>d?e.push("grid-cell-red"):e.push("grid-cell-green");break;case"point":5>d?e.push("grid-cell-red"):d>=5&&7>d?e.push("grid-cell-green"):e.push("grid-cell-purple");break;case"roe":10>d?e.push("grid-cell-red"):e.push("grid-cell-green");break;case"fxEffect":case"cashFlow":0>d?e.push("grid-cell-red"):d>0&&e.push("grid-cell-green")}return e},getCellClassSummary:function(a,b){var c=a.colDef.field,d=a.value,e=["ag-cell-orange-bg"];switch((b[c].indexOf("number")>-1||b[c].indexOf("percent")>-1||b[c].indexOf("bigNum")>-1)&&e.push("ui-cell-align-right"),a.value&&b[c].indexOf("percent")>-1&&e.push("percent"),c){case"symbol":""!=d&&(""!=a.data.signal1||""!=a.data.signal2)&&(""!=a.data.Canslim?e.push("ag-cell-purple-color"):e.push("grid-cell-green"),e.push("ag-cell-fill-bg"));break;case"totalValue":d>=5e9&&(e.push("ag-cell-purple-color"),e.push("ag-cell-fill-bg"));break;case"EPS":d>=3e3?(e.push("ag-cell-purple-color"),e.push("ag-cell-fill-bg")):d>1e3?e.push("grid-cell-green"):1e3>d&&e.push("grid-cell-red");break;case"newPoint":d>=7?(e.push("ag-cell-purple-color"),e.push("ag-cell-fill-bg")):d>=5?e.push("grid-cell-green"):4>=d&&e.push("grid-cell-red"),e.push("text-center");break;case"Canslim":case"pricePeak":""!=d&&(e.push("ag-cell-fill-bg"),e.push("ag-cell-purple-color")),e.push("text-center");break;case"symbol2":""!=d&&(""!=a.data.signal1||""!=a.data.signal2)&&(""!=a.data.Canslim?e.push("ag-cell-purple-color"):e.push("grid-cell-green"),e.push("ag-cell-fill-bg")),e.push("ag-cell-green-bg"),e.push("text-center");break;case"signal1":case"signal2":""!=d&&(e.push("ag-cell-fill-bg"),e.push("ag-cell-purple-color")),e.push("ag-cell-green-bg"),e.push("text-center");break;case"sellSignal":e.push("ag-cell-red-bg"),e.push("text-center")}return e},getMarketSummary:function(){$.ajaxSetup({async:!1});var a="";return $.getJSON("https://superstock.firebaseio.com/market_summary.json",{},function(b){b&&b.data&&(a=b.data.replace("\n","<br/>"))}),a},getSellSignals:function(){$.ajaxSetup({async:!1});var a=[];return $.getJSON("https://superstock.firebaseio.com/sell_symbols.json",{},function(b){b&&b.data&&(a=b.data.split("|"))}),a},getCompanyInformation:function(a){$.ajaxSetup({async:!1});var b=[];return $.getJSON("https://superstock.firebaseio.com/profile/"+a+".json",{},function(a){a&&a.data&&(b=a.data)}),b},writeData2Worksheet:function(a,b){return new Promise(function(a,b){var c="data/template.xlsx",d=new XMLHttpRequest;d.open("GET",c,!0),d.responseType="arraybuffer",d.onload=function(b){for(var c=d.response,e=new Uint8Array(c),f=new Array,g=0;g!=e.length;++g)f[g]=String.fromCharCode(e[g]);var h=f.join(""),i=XLSX.read(h,{type:"binary",cellStyles:!0});a(i)},d.send()}).then(function(c){return new Promise(function(d,e){var f=c.Sheets[c.SheetNames[0]],g=4;for(var h in a){var i=0;for(var j in a[h]){var k=j;if("symbol2"==j&&(k+=i,i++),b[k]){var l=b[k].cell;if(l){var m=l+(g+parseInt(h)),n=f[m];if(n||(n={}),n.v=a[h][j],(b[k].format.indexOf("number")>-1||b[k].format.indexOf("bigNum")>-1)&&(n.t="n",n.z="#,###",n.v&&null!=n.v&&""!=n.v||(n.v=0),0==n.v&&delete n.z),b[k].format.indexOf("percent")>-1){n.t="s";var o=parseFloat(n.v);isNaN(o)?n.v="":(o=o.toFixed(2),n.v=o+"%")}if(""==b[k].format&&(n.t="s"),f[m]=n,"symbol2"==j&&b[j+i]){var m=b[j+i].cell+(g+parseInt(h)),n=f[m];n.v=a[h][j]}}}}}d(c)})})["catch"](function(a){return a})},generateWorksheetFile:function(a,b){function c(a){for(var b=new ArrayBuffer(a.length),c=new Uint8Array(b),d=0;d!=a.length;++d)c[d]=255&a.charCodeAt(d);return b}var d={bookType:"xlsx",bookSST:!1,type:"binary",cellStyles:!0},e=XLSX.write(a,d),f=new Date,g="SuperStock"+f.getFullYear()+(f.getUTCMonth()+1)+f.getUTCDate()+".xlsx";saveAs(new Blob([c(e)],{type:""}),g),b&&b()}}}),angular.module("superstockApp").filter("reverse",function(){return function(a){return angular.isArray(a)?a.slice().reverse():[]}}),angular.module("firebase.auth",[]).constant("SIMPLE_LOGIN_PROVIDERS",["password","facebook"]).constant("loginRedirectPath","/login").factory("auth",["$firebaseAuth",function(a){return a()}]),angular.module("firebase.ref",["firebase"]).factory("Ref",function(){return firebase.database().ref()}),angular.module("superstockApp").controller("LoginCtrl",["$scope","auth","$location",function(a,b,c){function d(a){var b=(rootRef.child("users").child(a.uid),$q.defer());return ref.set({email:email,name:e(email)},function(a){$timeout(function(){a?b.reject(a):b.resolve(ref)})}),b.promise}function e(a){return f(a.substr(0,a.indexOf("@"))||"")}function f(a){a+="";var b=a.charAt(0).toUpperCase();return b+a.substr(1)}function g(){c.path("/account")}function h(b){a.err=b}a.loginBtn=!0,a.logoutBtn=!0,b.$onAuthStateChanged(function(b){b&&(console.log(" logged: "+b.uid),a.logoutBtn=!0,a.loginBtn=!1,c.path("/account"))}),a.oauthLogin=function(a){b.$signInWithPopup(a).then(function(a){console.log("logged"),g()})["catch"](function(a){console.log("login error"),h(a)})},a.anonymousLogin=function(){b.$signInAnonymously().then(function(a){console.log("logged ",a.uid)})["catch"](function(a){console.log("login error ",a)})},a.passwordLogin=function(a,c){b.$signInWithEmailAndPassword(a,c).then(function(a){g(),console.log("logged")})["catch"](function(a){h(a),console.log("error: "+a)})},a.createAccount=function(c,e,f){a.err=null,e?e!==f?a.err="Passwords do not match":b.$createUserWithEmailAndPassword(c,e).then(function(a){return console.log("User "+a.uid+" created successfully"),a}).then(function(a){console.log("Logged user: ",a.uid),d(),g()})["catch"](function(a){console.error("Error: ",a)}):a.err="Please enter a password"}}]),angular.module("superstockApp").controller("AccountCtrl",["$scope","auth","currentAuth",function(a,b,c,d){function e(a){console.log("Error: ",a)}a.user={uid:c.uid,name:c.displayName,photo:c.photoURL,email:c.email},a.authInfo=c,a.changePassword=function(c,d,f){a.err=null,c&&d?d!==f?e("Passwords do not match"):b.$updatePassword(d).then(function(){console.log("Password changed")},e):e("Please enter all fields")},a.changeEmail=function(a){b.$updateEmail(a).then(function(){console.log("email changed successfully")})["catch"](function(a){console.log("Error: ",a)})},a.logout=function(){b.$signOut()},a.updateProfile=function(a,b){firebase.auth().currentUser.updateProfile({displayName:a,photoURL:b}).then(function(){console.log("updated")})["catch"](function(a){console.log("error ",a)})}}]),angular.module("superstockApp").controller("MainCtrl",["$rootScope","$scope","auth","$firebaseArray","$firebaseObject","Ref","draw","uiGridConstants","$sce","utils","currentAuth","$window","$compile","$filter","$timeout",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){a.link="main",l.ga("send","event","Page","Tổng hợp"),b.gridMainOptions={enableSorting:!0,enableFilter:!0,suppressColumnVirtualisation:!0,suppressContextMenu:!0,rowData:[],data:[],enableColResize:!0,headerHeight:50,overlayLoadingTemplate:'<span class="ag-overlay-loading-center">Đang xử lý dữ liệu...</span>',sortingOrder:["desc","asc"],onAfterFilterChanged:function(){},onCellClicked:function(a){}},b.headerTitle=j.getMarketSummary();var p=e(f.child("summary_titles")),q=e(f.child("summary_headers")),r=e(f.child("summary_format"));p.$loaded(function(){q.$loaded(function(){r.$loaded(function(){function c(){$(".ui-grid-header-cell").each(function(){var a=$(this),b=a.find("span");b.text().indexOf("\n")<0?(b.parent().css("line-height","40px"),a.css("text-align","center")):b.last().css("margin-top","-2px")})}var d=p.data.split("|"),e=q.data.split("|"),h=r.data.split("|"),k={};d.push("Báo bán"),e.push("sellSignal"),h.push("text");var l=[80,150,125,95,75,95,105,135,140,60,140,70],m=[],s={idLabel:"Mã",labelList:[]},t=0;for(var u in d){k[e[u]]=h[u],s.labelList.push({fieldName:e[u],format:h[u]});var v=null,w=null;h[u].indexOf("bigNum")>-1||h[u].indexOf("number")>-1?(v="number",w="ui-cell-align-right"):w=h[u].indexOf("percent")>-1?"ui-cell-align-right":"ui-cell-align-left";var x={field:e[u],width:l[t],headerName:d[u],cellClass:w,enableTooltip:!0,tooltipField:e[u],cellRenderer:function(a){if("symbol2"==a.colDef.field){if(""==a.data.signal1&&""==a.data.signal2)return""}else{if("newPoint"==a.colDef.field||"EPS"==a.colDef.field){var b="";return b=isNaN(parseFloat(a.value))?n("number")(0,2):n("number")(parseFloat(a.value),2),'<div title="'+b+'">'+b+"</div>"}var b="";if(k[a.colDef.field].indexOf("number")>-1||k[a.colDef.field].indexOf("bigNum")>-1||k[a.colDef.field].indexOf("percent")>-1)return b=n("number")(a.value),k[a.colDef.field].indexOf("percent")>-1&&(isNaN(parseFloat(a.value))?b="":(b=n("number")(a.value,2),b+="%")),'<div title="'+b+'">'+b+"</div>"}return a.value},headerCellTemplate:function(a){var b=a.column,c=b.colId,d="";("signal1"==c||"symbol2"==c||"signal2"==c)&&(d="ag-header-cell-green");var e='<td width="20px" style="vertical-align:top"><span id="agMenu" class="ag-header-icon ag-header-cell-menu-button" style="opacity: 0; transition: opacity 0.2s, border 0.2s;"><svg width="12" height="12"><rect y="0" width="12" height="2" class="ag-header-icon"></rect><rect y="5" width="12" height="2" class="ag-header-icon"></rect><rect y="10" width="12" height="2" class="ag-header-icon"></rect></svg></span></td>',f='<td width="20px"><div id="" class="ag-header-cell-label"><span id="agSortAsc" class="ag-header-icon ag-sort-ascending-icon ag-hidden"><svg width="10" height="10"><polygon points="0,10 5,0 10,10"></polygon></svg></span>    <span id="agSortDesc" class="ag-header-icon ag-sort-descending-icon ag-hidden"><svg width="10" height="10"><polygon points="0,0 5,10 10,0"></polygon></svg></span><span id="agNoSort" class="ag-header-icon ag-sort-none-icon ag-hidden"><svg width="10" height="10"><polygon points="0,4 5,0 10,4"></polygon><polygon points="0,6 5,10 10,6"></polygon></svg></span><span id="agFilter" class="ag-header-icon ag-filter-icon ag-hidden"><svg width="10" height="10"><polygon points="0,0 4,4 4,10 6,10 6,4 10,0" class="ag-header-icon"></polygon></svg></span></div></td>';return"sellSignal"==c&&(f="",e="",d="ag-header-cell-red"),'<div class="ag-header-cell '+d+' ag-header-cell-sortable ag-header-cell-sorted-none"><table style="width:100%;height:100%"><tr>'+e+'<td><div id="agHeaderCellLabel" class="ag-header-cell-label"><span id="agText" class="ag-header-cell-text"></span></div></td>'+f+"</tr></table></div>"}};t++,v&&(x.cellFilter=v),"symbol"==e[u]?(x.filter="text",x.pinned="left",x.cellRenderer=function(a){var b=a.value;return"<div><span>"+a.value+'</span><img class="chart-icon" data-symbol="'+b+'" data-industry = "'+a.node.data.industry+'" src="./images/icon-graph.png"><img class="information-icon" data-symbol="'+b+'" data-industry = "'+a.node.data.industry+'" src="./images/icon-information.png" /></div>'}):"sellSignal"==e[u]&&(x.suppressSorting=!0),"totalValue"==x.field&&(x.sort="desc"),"industry"==x.field&&(x.minWidth=200),x.cellClass=function(a){return j.getCellClassSummary(a,k)},m.push(x)}a.filters=m;var y,z=[];try{console.clear()}catch(A){}var B=[];b.gridMainOptions.api&&(b.gridMainOptions.api.setColumnDefs(m),g.drawGrid(f.child("summary_data"),s,function(a){b.gridMainOptions.api.showLoadingOverlay()},function(a){b.gridMainOptions.api.addEventListener("afterSortChanged",function(a){var c=[];b.gridMainOptions.api&&null!=b.gridMainOptions.api&&(b.gridMainOptions.api.forEachNode(function(a){var b="";B[a.childIndex]&&(b=B[a.childIndex]),a.data.sellSignal=b,c.push(a)}),b.gridMainOptions.api.refreshCells(c,["sellSignal"]))}),setTimeout(function(){c()},1e3)},{added:function(a,c,d){z.push(a),y||(y=o(function(){if(b.gridMainOptions.api&&null!=b.gridMainOptions.api){b.gridMainOptions.api.setRowData(z),B=j.getSellSignals();var a=[];b.gridMainOptions.api.forEachNode(function(b){var c="";B[b.childIndex]&&(c=B[b.childIndex]),b.data.sellSignal=c,a.push(b)}),b.gridMainOptions.api.refreshCells(a,["sellSignal"])}z=[],y=void 0},1e3))},changed:function(a,b,c){},removed:function(a){}})),$(document).on("click",".chart-icon",function(){$("#myModal").modal("show"),b.stockInfo=$(this).data("symbol")+" - "+$(this).data("industry"),b.iSrc="https://banggia.vndirect.com.vn/chart/?symbol="+$(this).data("symbol"),b.iSrcTrust=i.trustAsResourceUrl(b.iSrc)}),$(document).on("click",".information-icon",function(){$("#companyModal").modal("show");var a=$(this).data("symbol"),c=$(this).data("industry");b.companyInfo=a+" - "+c,b.companyDatas=j.getCompanyInformation(a)})})})})}]),angular.module("superstockApp").controller("FullStockCtrl",["$rootScope","$scope","auth","$firebaseArray","$firebaseObject","Ref","draw","uiGridConstants","$sce","utils","currentAuth","$window","$compile","$filter","$timeout",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){function p(b,c){void 0!=b&&(x=b),v?r():a.filterData&&null!=a.filterData?q(a.filterData):a.resetFilter()}function q(a){a&&(a=a[0]),l.ga("send","event","Filter",a.filterName),x||(b.gridOptions.api&&null!=b.gridOptions.api&&b.gridOptions.api.showLoadingOverlay(),x=!0),o(function(){var c={};for(var d in a)a[d].condition&&a[d].term&&(c[d]={type:a[d].condition,filter:a[d].term});b.gridOptions.api&&(b.gridOptions.api.setFilterModel(c),b.gridOptions.api.onFilterChanged())},500)}function r(c,d){u++,v&&(u<=Object.keys(a.filterList).length||(x||(b.gridOptions.api&&null!=b.gridOptions.api&&b.gridOptions.api.showLoadingOverlay(),x=!0),o(function(){if(b.gridOptions.api&&null!=b.gridOptions.api){for(var c in a.filterList){var d=a.filterList[c],e=b.gridOptions.api.getFilterApi(c);if(d.filter){var f=d.filter.term;if(f&&f.length>0){var g=[];for(var h in f)g.push(f[h].value);g.length>0?e.setModel(g):e.selectEverything()}else e.selectEverything()}else if(d.filters&&d.filters[0]){var i=b.gridOptions.api.getFilterApi(c);if((i.GREATER_THAN||d.filters[0].condition)&&d.filters[0].term){var j=i.GREATER_THAN?i.GREATER_THAN:d.filters[0].condition;i.setType(j),i.setFilter(d.filters[0].term)}}}b.gridOptions.api.onFilterChanged()}},600),a.saveFilterSetting()))}function s(){$(".ui-grid-header-cell").each(function(){var a=$(this),b=a.find("span");b.text().indexOf("\n")<0?(b.parent().css("line-height","40px"),a.css("text-align","center")):b.last().css("margin-top","-2px")})}a.link="full",l.ga("send","event","Page","Đầy đủ");var t=null,u=0,v=!1;if(a.filterList={},k){var w=e(f.child("users/"+k.uid+"/filter"));a.filterRef=w,w.$loaded(function(a){t={};for(var b in a)"$"!=b.charAt(0)&&"forEach"!=b&&(t[b]=a[b])})}b.gridOptions={enableSorting:!0,enableFilter:!0,suppressColumnVirtualisation:!0,suppressContextMenu:!0,rowData:[],data:[],enableColResize:!0,headerHeight:50,overlayLoadingTemplate:'<span class="ag-overlay-loading-center">Đang xử lý dữ liệu...</span>',sortingOrder:["desc","asc"],onAfterFilterChanged:function(){},onCellClicked:function(a){}};var x=!1;a.filterModes=function(a){v=a,p(void 0)},a.parseBigNum=function(a){var b=parseFloat(a)/y;return b},a.resetFilter=function(){b.gridOptions.api&&null!=b.gridOptions.api&&b.gridOptions.api.showLoadingOverlay(),o(function(){b.gridOptions.api&&(b.gridOptions.api.setFilterModel(null),b.gridOptions.api.onFilterChanged())},600)},a.search=function(a){var c=b.gridOptions.api.getFilterApi("symbol");c.setType(c.CONTAINS||"contains"),c.setFilter(a),b.gridOptions.api.onFilterChanged()},b.rowAfterFilter=[],a.exportDatasheet=function(a){a.preventDefault(),$("#exportProccessing").modal("show"),o(function(){var a={};if(b.rowAfterFilter&&b.rowAfterFilter.length>0)for(var c in b.rowAfterFilter){var d=b.rowAfterFilter[c],e=d.data;a[d.childIndex]=e,a[d.childIndex]&&(a[d.childIndex].basicCustom="http://ivt.ssi.com.vn/CorporateProfile.aspx?Ticket="+a[d.childIndex].symbol,a[d.childIndex].chartCustom="https://banggia.vndirect.com.vn/chart/?symbol="+a[d.childIndex].symbol)}else{if(!b.gridOptions.api)return;b.gridOptions.api.forEachNode(function(b){var c=b.data;a[b.childIndex]=c,a[b.childIndex]&&(a[b.childIndex].basicCustom="http://ivt.ssi.com.vn/CorporateProfile.aspx?Ticket="+a[b.childIndex].symbol,a[b.childIndex].chartCustom="https://banggia.vndirect.com.vn/chart/?symbol="+a[b.childIndex].symbol)})}var f=A.data.split("|"),g=B.data.split("|"),h={},i=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","AA","AB","AC","AD","AE","AF","AG","AH","AI","AJ","AK","AL","AM","AN","AO","AP","AQ","AR","AS","AT","AU","AV","AW","AX","AY","AZ"],k=0,l=3;for(var c in f){var m=c;"symbol"!=f[c]&&(m=l.toString());var n={cell:i[m],format:g[c]};"symbol2"==f[c]?(h[f[c]+k]=n,k++):h[f[c]]=n,"symbol"!=f[c]&&l++}j.writeData2Worksheet(a,h).then(function(a){j.generateWorksheetFile(a,function(){$("#exportProccessing").modal("hide")})})},500)};var y=1e9,z=e(f.child("superstock_titles")),A=e(f.child("superstock_fields")),B=e(f.child("superstock_format"));A.$loaded(function(){z.$loaded(function(){B.$loaded(function(){var c=z.data.split("|"),d=A.data.split("|"),e=B.data.split("|"),h={},i=[65,250,130,100,120,140,140,130,80,150,160,150,90,140,100,120,140,120,120,120,100,120,90,140,140,140,170,80,140,110,140,100,120,120,140,120,120,120,120,100,140,140,80,140],l=[],m={idLabel:"Mã",labelList:[]};for(var q in c){h[d[q]]=e[q],m.labelList.push({fieldName:d[q],format:e[q]});var t=null,u=null,w="text";e[q].indexOf("bigNum")>-1||e[q].indexOf("number")>-1?(t="number",w="number"):e[q].indexOf("percent")>-1&&(w="number");var x={field:d[q],width:i[q],headerName:c[q],cellClass:u,enableTooltip:!0,tooltipField:d[q],cellRenderer:function(a){if("symbol2"==a.colDef.field){if(""==a.data.signal1&&""==a.data.signal2)return""}else{if("newPoint"==a.colDef.field||"EPS"==a.colDef.field||"fxEffect"==a.colDef.field||"cashFlow"==a.colDef.field){var b="";return b=isNaN(parseFloat(a.value))?n("number")(0,2):n("number")(parseFloat(a.value),2),'<div title="'+b+'">'+b+"</div>"}if("buyDate"==a.colDef.field);else{var b="";if(h[a.colDef.field].indexOf("number")>-1||h[a.colDef.field].indexOf("bigNum")>-1||h[a.colDef.field].indexOf("percent")>-1)return b=n("number")(a.value),h[a.colDef.field].indexOf("percent")>-1&&(isNaN(parseFloat(a.value))?b="":(b=n("number")(a.value,2),b+="%")),'<div title="'+b+'">'+b+"</div>"}}return a.value},headerCellTemplate:function(){return'<div class="ag-header-cell ag-header-cell-sortable ag-header-cell-sorted-none"><table style="width:100%;height:100%"><tr><td width="20px" style="vertical-align:top"><span id="agMenu" class="ag-header-icon ag-header-cell-menu-button" style="opacity: 0; transition: opacity 0.2s, border 0.2s;"><svg width="12" height="12"><rect y="0" width="12" height="2" class="ag-header-icon"></rect><rect y="5" width="12" height="2" class="ag-header-icon"></rect><rect y="10" width="12" height="2" class="ag-header-icon"></rect></svg></span></td><td><div id="agHeaderCellLabel" class="ag-header-cell-label"><span id="agText" class="ag-header-cell-text"></span></div></td><td width="20px"><div id="" class="ag-header-cell-label"><span id="agSortAsc" class="ag-header-icon ag-sort-ascending-icon ag-hidden"><svg width="10" height="10"><polygon points="0,10 5,0 10,10"></polygon></svg></span>    <span id="agSortDesc" class="ag-header-icon ag-sort-descending-icon ag-hidden"><svg width="10" height="10"><polygon points="0,0 5,10 10,0"></polygon></svg></span><span id="agNoSort" class="ag-header-icon ag-sort-none-icon ag-hidden"><svg width="10" height="10"><polygon points="0,4 5,0 10,4"></polygon><polygon points="0,6 5,10 10,6"></polygon></svg></span><span id="agFilter" class="ag-header-icon ag-filter-icon ag-hidden"><svg width="10" height="10"><polygon points="0,0 4,4 4,10 6,10 6,4 10,0" class="ag-header-icon"></polygon></svg></span></div></td></tr></table></div>'}};if(a.userSetting&&a.userSetting.sort&&a.userSetting.sort.full&&x.field==a.userSetting.sort.full.colId&&(x.sort=a.userSetting.sort.full.sort),a.userSetting&&a.userSetting.pinColumns&&a.userSetting.pinColumns.full){var C=a.userSetting.pinColumns.full.indexOf(x.field);C>-1&&(x.pinned="left")}if(a.userSetting&&a.userSetting.hiddenColumns&&a.userSetting.hiddenColumns.full){var C=a.userSetting.hiddenColumns.full.indexOf(x.field);C>-1&&(x.hide=!0)}if(t&&(x.cellFilter=t),w&&(x.filter=w),""!=e[q]){var D=e[q].split(":");if(4===D.length){var E=[{condition:"greaterThan",term:"bigNum"==D[0]?parseFloat(D[2])*y:parseFloat(D[2]),min:"bigNum"==D[0]?parseFloat(D[1])*y:parseFloat(D[1]),bigNum:"bigNum"==D[0]?!0:!1},{condition:"lessThan",term:1/0,max:"bigNum"==D[0]?parseFloat(D[3])*y:parseFloat(D[3])}];a.filterList[x.field]={headerName:x.headerName,filters:E}}}if("symbol"==d[q]&&(x.width=80,x.filter="text",x.pinned="left",x.cellRenderer=function(a){var b=a.value;return"<div><span>"+a.value+'</span><img class="chart-icon" data-symbol="'+b+'" data-industry = "'+a.node.data.industry+'" src="./images/icon-graph.png"><img class="information-icon" data-symbol="'+b+'" data-industry = "'+a.node.data.industry+'" src="./images/icon-information.png" /></div>'}),"shorttermSignal"==d[q]){var w={term:null,selectOptions:[{value:"xBán",label:"Bán"},{value:"xMua nếu cơ bản tốt",label:"Mua"}]};a.filterList[x.field]={headerName:x.headerName,filter:w}}else if("industry"==d[q]){var w={term:null,selectOptions:[{value:"Bao bì & đóng gói",label:"Bao bì & đóng gói"},{value:"Nông sản và thủy hải sản",label:"Nông sản và thủy hải sản"},{value:"Ngân hàng",label:"Ngân hàng"},{value:"Thực phẩm",label:"Thực phẩm"}],typeSearch:"multiple"};a.filterList[x.field]={headerName:x.headerName,filter:w},x.minWidth=200}x.cellClass=function(a){return j.getCellClass(a,h)},l.push(x)}a.filters=l,a.setFilterSetting(),a.userFilter&&(a.userFilter.individualFilter&&(a.filterList=filterConvert(a.filterList,a.userFilter.individualFilter)),v=a.userFilter.filterMode);var F,G=[];try{console.clear()}catch(H){}b.gridOptions.api&&(b.gridOptions.api.setColumnDefs(l),b.gridOptions.api.showLoadingOverlay(),g.drawGrid(f.child("superstock"),m,function(a){},function(c){if(b.gridOptions.api){b.gridOptions.api.hideOverlay(),b.gridOptions.api.addEventListener("afterSortChanged",function(c){var d=a.userSetting;d||(d={sort:{full:{}},pinColumns:{}}),d.sort||(d.sort={full:{}}),d.sort.full||(d.sort.full={});var e=b.gridOptions.api.getSortModel();e&&e[0]&&(d.sort.full=e[0]);var g=f.child("users/"+k.uid);g.child("userSetting").set(d,function(a){a?console.log(a):console.log("Saved user setting")})}),b.gridOptions.api.addEventListener("columnPinned",function(c){var d=a.userSetting;d||(d={sort:{full:{}},pinColumns:{full:{}}}),d.pinColumns||(d.pinColumns={full:[]}),d.pinColumns.full||(d.pinColumns.full=[]);var e=b.gridOptions.columnApi.getDisplayedLeftColumns();if(d.pinColumns.full=[],e)for(var g in e){var h=e[g].colId;d.pinColumns.full.push(h)}var i=f.child("users/"+k.uid);i.child("userSetting").set(d,function(a){a?console.log(a):console.log("Saved user setting")})}),b.gridOptions.api.addEventListener("beforeFilterChanged",function(a){}),b.gridOptions.api.addEventListener("afterFilterChanged",function(a){b.gridOptions.api.hideOverlay(),b.rowAfterFilter=b.gridOptions.api.rowModel.rowsToDisplay}),b.gridOptions.api.addEventListener("columnVisible",function(c){var d=a.userSetting;d||(d={sort:{full:{}},pinColumns:{full:[]},hiddenColumns:{full:[]}}),d.hiddenColumns||(d.hiddenColumns={full:[]}),d.hiddenColumns.full||(d.hiddenColumns.full=[]);var e=b.gridOptions.columnApi.getAllColumns(),g=e.filter(function(a){return 0==a.visible}),h=[];if(g)for(var i in g)h.push(g[i].colId);d.hiddenColumns.full=h;var j=f.child("users/"+k.uid);j.child("userSetting").set(d,function(a){a?console.log(a):console.log("Saved user setting")})});for(var d in a.filterList)a.filterList[d].filters&&b.$watch('filterList["'+d+'"].filters[0].term',function(a,b){r(a,b)}),a.filterList[d].filter&&b.$watch('filterList["'+d+'"].filter.term',function(a,b){r(a,b)});setTimeout(function(){s()},1e3)}},{added:function(a,c,d){isNaN(a.disruptQtty)&&(a.disruptQtty=0),G.push(a),F||(F=o(function(){b.gridOptions.api&&null!=b.gridOptions.api&&b.gridOptions.api.setRowData(G),p(!1),G=[],F=void 0},1e3))},changed:function(a,b,c){},removed:function(a){}}))})})}),$(document).ready(function(){$(document).on("change",".subTerm",function(){$(this).each(function(){var c=$(this);c.prop("value",c.val());var d=c.data("model");b.$apply(function(){a.filterList[d].filters[0].term=parseFloat(c.val())*y,c.prop("value",c.val())}),c.parent().next().children().slider({slide:function(a,b){c.prop("value",b.value/y)}})})}),$(document).on("click",".chart-icon",function(){$("#myModal").modal("show"),b.stockInfo=$(this).data("symbol")+" - "+$(this).data("industry"),b.iSrc="https://banggia.vndirect.com.vn/chart/?symbol="+$(this).data("symbol"),b.iSrcTrust=i.trustAsResourceUrl(b.iSrc)}),$(document).on("click",".information-icon",function(){$("#companyModal").modal("show");var a=$(this).data("symbol"),c=$(this).data("industry");b.companyInfo=a+" - "+c,b.companyDatas=j.getCompanyInformation(a)})})}]).directive("ngEnter",function(){return function(a,b,c){b.bind("keydown keypress",function(b){13===b.which&&(a.$apply(function(){a.$eval(c.ngEnter)}),b.preventDefault())})}}),angular.module("superstockApp").controller("MenuCtrl",["$rootScope","$scope","auth","$location","Ref","$firebaseObject","$timeout",function(a,b,c,d,e,f,g){function h(){d.path("/")}function i(c,d){var g=c.toJSON();return new Promise(function(b,c){var d=f(e.child("users/"+g.uid));a.$userRef=d,d.$loaded(function(a){a?(g.account=a.account,b(g)):b()})}).then(function(c){return new Promise(function(f,g){var h=e.child("users/"),i=c.uid,j={profile:{fullName:c.displayName,email:c.email},account:{active:!0}};"password"==d&&(j.profile.fullName=b.userSignup.fullName,j.profile.phoneNumber=b.userSignup.phoneNumber),c.providerData&&c.providerData[0]&&(j.profile.email=c.providerData[0].email),c&&c.account&&(h=e.child("users/"+c.uid),i="profile",j=j.profile),h.child(i).set(j,function(c){c?g():(a.fullName=b.userSignup.fullName,f(j))})})})}function j(a){var b=a;if("facebook"==a){b=new firebase.auth.FacebookAuthProvider;for(var c in b)b[c]instanceof Array&&b[c].push("email")}return b}function k(a){var c=b.form,d=b.userSignin;"signup"==a?(c=b.form_signup,d=b.userSignup):"changePassword"==a?(c=b.form_change_pasword,d=b.userProfile):"changeProfile"==a&&(c=b.form_change_profile,d=b.userProfile);var e=!0;return"changePassword"==a||"changeProfile"==a||(!d||d.email)&&c.email.$valid?b.checkEmail=!0:(b.checkEmail=!1,e=!1),c.password&&d&&(!d.password||d.password.length<7)?(b.checkPassword=!1,e=!1):b.checkPassword=!0,c&&c.confirm_password&&(d.password==d.confirmPassword&&d.confirmPassword?b.checkConfirmPassword=!0:(b.checkConfirmPassword=!1,e=!1)),c&&c.full_name&&(d&&!d.fullName?(b.checkFullName=!1,e=!1):b.checkFullName=!0),c&&c.new_password&&(!d.newPassword||d.newPassword.length<7?(b.checkNewPassword=!1,e=!1):b.checkNewPassword=!0),c&&c.confirm_new_password&&(d.newPassword==d.confirmNewPassword&&d.confirmNewPassword?b.checkConfirmNewPassword=!0:(b.checkConfirmNewPassword=!1,e=!1)),c&&c.phone_number&&(d.phoneNumber?b.checkPhoneNumber=!0:(b.checkPhoneNumber=!1,e=!1)),e}a.user=null,a.link="";b.filterShow=function(b){b.preventDefault(),b.stopPropagation(),"main"!=a.link&&($("#wrapper").toggleClass("toggled"),$("#wrapper").hasClass("toggled")?(a.filterOn=!0,$("#filter-control").removeClass("ng-hide")):(a.filterOn=!0,a.setDataForDefaultFilter(),$("#filter-control").addClass("ng-hide")))},b.userSignin={},b.userSignup={},b.userProfile={},b.checkEmail,b.checkPassword,b.checkSignIn=!0,b.checkConfirmPassword,b.checkFullName,b.checkNewPassword,b.checkConfirmNewPassword,b.disabledButton,b.loading=!1,b.oauthLogin=function(a){var d=j(a);if("facebook"==a)c.$signInWithPopup(d).then(function(a){return i(a.user)}).then(function(a){$("#signInModal").modal("hide"),h()})["catch"](function(a){console.log("login error"),console.log(a)});else{if(!k())return void(b.checkSignIn=!0);b.disabledButton=!0,b.loading=!0,b.checkSignIn=!0,c.$signInWithEmailAndPassword(b.userSignin.email,b.userSignin.password).then(function(a){$("#signInModal").modal("hide"),b.disabledButton=!1,b.loading=!1,h()})["catch"](function(a){b.disabledButton=!1,b.loading=!1,a.code&&(b.checkSignIn=!1)})}},b.oauthSignUp=function(){k("signup")&&(b.disabledButton=!0,b.loading=!0,c.$createUserWithEmailAndPassword(b.userSignup.email,b.userSignup.password).then(function(c){return a.userTmp={email:b.userSignup.email,displayName:b.userSignup.fullName,phoneNumber:b.userSignup.phoneNumber},i(c,"password")}).then(function(a){$("#signUpModal").modal("hide"),b.disabledButton=!1,b.loading=!1,h()})["catch"](function(a){b.disabledButton=!1,b.loading=!1,a.code&&(b.checkSignIn=!1)}))},b.logout=function(){c.$signOut(),a.$userRef&&a.$userRef.$destroy(),d.path("/")},a.openGuideModal=function(a){a.preventDefault(),$("#superStockGuideModal").modal("show")},a.activeDeactiveAccount=function(b,c){c.preventDefault();var d,g=new Promise(function(a,c){var g=f(e.child("users/"+b));d=g,g.$loaded(function(b){b&&b.account?a(b):c()})});g.then(function(c){return new Promise(function(d,f){var g=e.child("users/"+b),h={active:!0};if(c.account.active&&(h.active=!1),h.active){var i=new Date;i.setDate(i.getUTCDate()+1),h.expired_date=i.getFullYear()+"-"+(i.getUTCMonth()+1)+"-"+i.getUTCDate()}else h.expired_date="";g.child("account").set(h,function(b){b?f():(a.user.account.active=h.active,h.expired_date&&(a.user.account.expired_date=new Date(h.expired_date)),d())})})}).then(function(){$(c.target).parent().addClass("hidden"),d&&d.$destroy();
})["catch"](function(a){$(c.target).parent().addClass("hidden"),d&&d.$destroy()})},b.signInForm=function(){b.checkEmail=!0,b.checkPassword=!0,b.checkSignIn=!0,b.checkConfirmPassword=!0,b.checkFullName=!0,b.loading=!1,b.userSignin={},$("#signInModal").modal("show")},b.signUpForm=function(){b.checkEmail=!0,b.checkPassword=!0,b.checkSignIn=!0,b.checkConfirmPassword=!0,b.checkFullName=!0,b.checkPhoneNumber=!0,b.loading=!1,b.userSignup={},$("#signUpModal").modal("show")},b.changePasswordForm=function(){b.checkEmail=!0,b.checkPassword=!0,b.checkSignIn=!0,b.checkConfirmPassword=!0,b.checkFullName=!0,b.checkPhoneNumber=!0,b.loading=!1,b.userSignup={},$("#changePasswordModal").modal("show")},b.changeProfileForm=function(){$("#changeProfileModal").modal("show")},b.changePassword=function(){return k("changePassword")?(b.loading=!0,void c.$updatePassword(b.userProfile.newPassword).then(function(a){$("#changePasswordModal").modal("hide"),b.disabledButton=!1,b.loading=!1})["catch"](function(a){b.disabledButton=!1,b.loading=!1,a.code&&(b.checkChangePassword=!1)})):void(b.checkChangePassword=!0)},b.changeProfile=function(){if(!k("changeProfile"))return void(b.checkChangeProfile=!0);if(a.user){var c=a.user.profile;c.fullName=b.userProfile.fullName,c.phoneNumber=b.userProfile.phoneNumber,b.loading=!0,b.disabledButton=!0;var d=e.child("users/"+a.user.uid);d.child("profile").set(c,function(c){b.$apply(function(){c||(a.user.displayName=b.userProfile.fullName,a.user.phoneNumber=b.userProfile.phoneNumber),$("#changeProfileModal").modal("hide"),b.disabledButton=!1,b.loading=!1})})}},$(document).on("hidden.bs.modal",".modal",function(){var a=$(this);a.find("input").val(""),b.$apply(function(){b.checkEmail=!0,b.checkPassword=!0,b.checkSignIn=!0,b.checkConfirmPassword=!0,b.checkFullName=!0,b.checkNewPassword=!0,b.checkConfirmNewPassword=!0,b.userSignin={},b.userSignup={},b.userProfile={}})}),$(document).on("shown.bs.modal","#changeProfileModal",function(){b.$apply(function(){a.user&&(b.userProfile.fullName=a.user.displayName,b.userProfile.phoneNumber=a.user.phoneNumber)})})}]),angular.module("superstockApp").controller("FilterCtrl",["$rootScope","$scope","Ref","$firebaseArray","$compile",function(a,b,c,d,e){b.defaultFilter=[{id:1,EPS:{term:1e3,condition:"greaterThan"},maVol30:{term:3e4,condition:"greaterThan"},point:{term:7,condition:"greaterThan"},profitChange:{term:20,condition:"greaterThan"},roe:{term:7,condition:"greaterThan"},filterName:"Cơ bản tốt"},{id:2,canslim:{term:"Canslim",condition:"contains"},maVol30:{term:3e4,condition:"greaterThanOrEqual"},filterName:"Canslim"},{id:3,totalValue:{term:5e9,condition:"greaterThanOrEqual"},priceChange:{term:1,condition:"greaterThanOrEqual"},EPS:{term:3e3,condition:"greaterThanOrEqual"},point:{term:7,condition:"greaterThanOrEqual"},filterName:"Siêu cổ phiếu"},{id:4,capital:{term:1e4,condition:"greaterThanOrEqual"},filterName:"Vốn hóa lớn"},{id:5,sideway:{term:"sideway",condition:"contains"},maVol30:{term:3e4,condition:"greaterThanOrEqual"},filterName:"Các mã sideway"},{id:6,totalValue:{term:3e9,condition:"greaterThanOrEqual"},pricePeak:{term:"Cao nhất 30 phiên",condition:"contains"},filterName:"Vượt đỉnh"}],b.individualFilter=!1,b.publicFilter=!0,b.filterModes,a.$watch("searchTerm",function(){a.search&&a.search(a.searchTerm)}),b.filterChange=function(){b.filter&&0==b.filter.length&&(b.filter=null),a.filterData=b.filter,a.filterModes&&a.filterModes(),a.saveFilterSetting()},b.$watch("filterModes",function(){a.filterModes&&(b.filterModes?(b.publicFilter=!1,b.individualFilter=!0,a.filterModes(!0)):(b.publicFilter=!0,b.individualFilter=!1,a.filterModes(!1)),a.saveFilterSetting())}),a.resetFilterModes=function(){b.filterModes=!1,b.publicFilter=!0,b.individualFilter=!1},$(document).on("click","#container-fluit-area, #footer-area, #header-area",function(){$("#sidebar-wrapper").parent().hasClass("toggled")||($("#filter-control").removeClass("ng-hide"),$("#wrapper").toggleClass("toggled"),b.$apply(function(){}))}),a.setDataForDefaultFilter=function(){},a.saveFilterSetting=function(){var d={};a.userFilter&&(d=a.userFilter,d.filterMode||d.publicFilter||d.individualFilter||(d={})),d.filterMode=b.filterModes;var e=[];if(b.filter&&null!=b.filter)for(var f in b.filter)e.push(b.filter[f].id);e&&(d.publicFilter=e);var g=filterConvert(a.filterList,null);g&&Object.keys(a.filterList).length>0&&(d.individualFilter=g);var h=c.child("users/"+a.user.uid);h.child("filter").set(d,function(a){a?console.log(a):console.log("Saved filter setting")})},a.setFilterSetting=function(){if(a.userFilter&&void 0!=a.userFilter.filterMode&&(b.filterModes=a.userFilter.filterMode,a.userFilter.publicFilter)){var c=[];for(var d in a.userFilter.publicFilter){var e=a.userFilter.publicFilter[d],f=b.defaultFilter.filter(function(a){return e==a.id});f&&f[0]&&c.push(f[0])}c&&c.length>0&&(b.filter=c)}}}]),angular.module("superstockApp").directive("ngShowAuth",["auth","$timeout",function(a,b){return{restrict:"A",link:function(c,d){function e(){b(function(){d.toggleClass("ng-cloak",!a.$getAuth())},0)}d.addClass("ng-cloak"),a.$onAuthStateChanged(e),e()}}}]),angular.module("superstockApp").directive("ngHideAuth",["auth","$timeout",function(a,b){return{restrict:"A",link:function(c,d){function e(){b(function(){d.toggleClass("ng-cloak",!!a.$getAuth())},0)}d.addClass("ng-cloak"),a.$onAuthStateChanged(e),e()}}}]),angular.module("superstockApp").directive("categoryHeader",function(){function a(a){console.log(a.gridOptions.columnDefs),a.headerRowHeight=30,a.catHeaderRowHeight=a.headerRowHeight+"px",a.categories=[];var b="",c=0,d=0;cols=a.gridOptions.columnDefs;for(var e=0;e<cols.length;e++){c+=Number(cols[e].width);var f="undefined"==typeof cols[e].categoryDisplayName?" ":cols[e].categoryDisplayName;f!==b&&(a.categories.push({displayName:b,width:c-Number(cols[e].width),widthPx:c-Number(cols[e].width)+"px",left:d,leftPx:d+"px"}),d+=c-Number(cols[e].width),c=Number(cols[e].width),b=f)}c>0&&a.categories.push({displayName:b,width:c,widthPx:c+"px",left:d,leftPx:d+"px"})}return{templateUrl:"scripts/directives/templates/category_header.html",link:a}}),angular.module("superstockApp").config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",resolve:{currentAuth:["auth",function(a){return a.$waitForSignIn()}]}}).when("/full",{templateUrl:"views/full-stock.html",controller:"FullStockCtrl",resolve:{currentAuth:["auth",function(a){return a.$waitForSignIn()}]}}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).when("/login",{templateUrl:"views/login.html",controller:"LoginCtrl"}).when("/account",{templateUrl:"views/account.html",controller:"AccountCtrl",resolve:{currentAuth:["auth",function(a){return a.$requireSignIn()}]}}).when("/chat",{templateUrl:"views/chat.html",controller:"Chat",resolve:{currentAuth:["auth",function(a){return a.$waitForSignIn()}]}}).otherwise({redirectTo:"/"})}]).run(["$rootScope","$location","loginRedirectPath","auth","$firebaseObject","Ref",function(a,b,c,d,e,f,g,h,i,j){d.$onAuthStateChanged(function(b){if(a.user=b?b.toJSON():void 0,a.userTmp&&(a.user.displayName=a.userTmp.displayName,a.user.phoneNumber=a.userTmp.phoneNumber),a.user){var c=f.child("users/"+a.user.uid);a.$userRefChange=e(c),a.$userRefChange.$loaded(function(c){var d=!1;a.userSetting=c.userSetting,a.userFilter=c.filter,a.user.profile=c.profile,c.account?(a.user.account=c.account,b&&c&&c.profile&&(a.user.displayName=c.profile.fullName?c.profile.fullName:a.user.displayName,a.user.phoneNumber=c.profile.phoneNumber),a.fullName&&(a.user.displayName=a.fullName),a.user.account.expired_date&&(a.user.account.expired_date=new Date(a.user.account.expired_date)),a.user.account.active=!0):a.user.account={active:!0},d=!a.user.account.active,d&&$("#expiredMessageModal").modal("show")})}else a.$userRefChange&&a.$userRefChange.$destroy(),a.filterRef&&a.filterRef.$destroy();a.showUI=!0}),a.$on("$routeChangeError",function(a,d,e,f){"AUTH_REQUIRED"===f&&b.path(c)})}]);